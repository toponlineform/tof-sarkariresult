---
// src/layouts/ToolLayout.astro
import Layout from './Layout.astro';
import ToolsSidebar from '../components/ToolsSidebar.astro';

// Props receive karna
const { 
  title, 
  description, 
  toolName, 
  showSidebar = true, 
  keywords = "online tools, free tools, student tools" 
} = Astro.props;

// Current URL for Canonical
const canonicalURL = new URL(Astro.url.pathname, Astro.site || 'https://toponlineform.com');

// 1. ðŸ§  PRO SEO SCHEMA: SoftwareApplication
const softwareSchema = {
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": toolName,
  "operatingSystem": "Web",
  "applicationCategory": "UtilitiesApplication",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "INR"
  },
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "4.8",
    "ratingCount": "1250"
  },
  "description": description
};

// 2. ðŸ§  BREADCRUMB SCHEMA (Google Structure ke liye)
const breadcrumbSchema = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": Astro.site ? `${Astro.site}` : "https://toponlineform.com"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Tools",
      "item": Astro.site ? `${Astro.site}tools` : "https://toponlineform.com/tools"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": toolName,
      "item": Astro.url.href
    }
  ]
};
---

<Layout title={title} description={description}>
  {/* Schemas Inject Karna */}
  <script type="application/ld+json" set:html={JSON.stringify(softwareSchema)} slot="head" />
  <script type="application/ld+json" set:html={JSON.stringify(breadcrumbSchema)} slot="head" />
  
  <div class="bg-gray-50 min-h-screen py-6 md:py-8">
    <div class="container mx-auto px-4 max-w-7xl">
      
      {/* âœ¨ NEW: Breadcrumbs Navigation (Visual) */}
      <nav class="flex text-sm text-gray-500 mb-6" aria-label="Breadcrumb">
        <ol class="inline-flex items-center space-x-1 md:space-x-3">
          <li class="inline-flex items-center">
            <a href="/" class="hover:text-blue-600 flex items-center gap-1 transition-colors">
              <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20"><path d="m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z"/></svg>
              Home
            </a>
          </li>
          <li><span class="text-gray-400">/</span></li>
          <li class="inline-flex items-center">
            <a href="/tools/" class="hover:text-blue-600 transition-colors">Tools</a>
          </li>
          <li><span class="text-gray-400">/</span></li>
          <li aria-current="page">
            <span class="text-blue-700 font-medium">{toolName}</span>
          </li>
        </ol>
      </nav>
      
      <div class="flex flex-col lg:flex-row gap-8 items-start">
        
        {/* Main Content Area */}
        <main class={`w-full ${showSidebar ? 'lg:w-3/4' : 'lg:w-full mx-auto'}`}>
            
           {/* Header Section (Contains the ONLY H1) */}
           <div class="bg-white p-6 rounded-t-xl border-b border-gray-100 shadow-sm">
              <h1 class="text-2xl md:text-4xl font-extrabold text-gray-800 mb-2 leading-tight">
                {title}
              </h1>
              <p class="text-gray-500 text-base md:text-lg">{description}</p>
           </div>

           {/* Tool Interface Slot */}
           <div class="bg-white p-6 rounded-b-xl shadow-sm min-h-[400px]">
              <slot /> 
           </div>

           {/* SEO Content Box */}
           <div class="mt-8 bg-white p-6 md:p-8 rounded-xl shadow-sm border border-gray-100 prose max-w-none text-gray-600 prose-headings:text-gray-800 prose-a:text-blue-600">
              <h2 class="text-xl font-bold border-b pb-2 mb-4">About {toolName}</h2>
              <slot name="content" />
           </div>
        </main>

        {/* Sidebar Area */}
        {showSidebar && (
          <aside class="w-full lg:w-1/4 sticky top-4">
            <ToolsSidebar />
          </aside>
        )}

      </div>
    </div>
  </div>
</Layout>
