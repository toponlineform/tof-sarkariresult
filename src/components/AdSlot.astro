---
// src/components/AdSlot.astro

// =========================================================
// üéõÔ∏è CONTROL ROOM (Yahan se manage karein)
// =========================================================

// 1. ADSENSE ID
export const ADSENSE_ID = "ca-pub-XXXXXXXXXXXXXXXX"; 

// 2. MAIN SCRIPT SWITCH (Vignette/Auto Ads ke liye)
// Note: Agar ye 'false' hai, toh neeche wale Manual Ads bhi nahi chalenge (kyunki engine band hai).
export const LOAD_SCRIPT = true; 

// 3. MANUAL BLOCKS SWITCH (Page ke beech wale dabbe)
// Agar aap chahte hain ki sirf Vignette aaye aur page clean rahe, toh isse 'false' karein.
const ENABLE_MANUAL_ADS = true; 

// =========================================================

// 4. SLOT IDs
const SLOT_IDS = {
    horizontal: "1234567890",
    vertical:   "0987654321",
    square:     "1122334455",
};

const { type = 'horizontal' } = Astro.props;

// üõë LOGIC: Agar Manual Ads band hain, toh component render mat karo.
if (!ENABLE_MANUAL_ADS) {
    return null; 
}

const currentSlotId = SLOT_IDS[type] || SLOT_IDS.horizontal;

// --- CSS LOGIC ---
let containerClass = "my-6 mx-auto flex justify-center items-center bg-gray-50 border border-gray-100 rounded-lg overflow-hidden";
let adFormat = "auto";
let adStyle = { display: 'block' };

if (type === 'horizontal') {
    containerClass += " w-full min-h-[100px]"; 
    adFormat = "auto"; 
} 
else if (type === 'vertical') {
    containerClass += " w-full max-w-[300px] min-h-[250px]"; 
    adFormat = "auto"; 
} 
else if (type === 'square') {
    containerClass += " w-full max-w-[336px] min-h-[280px]";
    adFormat = "rectangle";
}
---

<div class={containerClass}>
    
    {/* DEV MODE */}
    {import.meta.env.DEV ? (
        <div class="flex flex-col items-center justify-center text-gray-400 p-4 text-center w-full h-full bg-gray-100 border-2 border-dashed border-gray-300">
            <span class="text-xs font-bold uppercase tracking-widest text-gray-500">Ad ({type})</span>
            <span class="text-[10px] font-mono mt-1 text-blue-500">Auto Format</span>
        </div>
    ) : (
        /* PROD MODE */
        <ins class="adsbygoogle"
             style={adStyle}
             data-ad-client={ADSENSE_ID}
             data-ad-slot={currentSlotId}
             data-ad-format={adFormat} 
             data-full-width-responsive="true"
        ></ins>
    )}

    {/* Push Script (Sirf tab chalega jab Manual Ads enabled honge) */}
    {!import.meta.env.DEV && (
        <script is:inline>
             (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    )}
</div>
