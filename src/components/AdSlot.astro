---
// src/components/AdSlot.astro

// 1. MASTER ID
export const ADSENSE_ID = "ca-pub-XXXXXXXXXXXXXXXX"; 

// 2. SLOT IDs (AdSense Dashboard se "Display Ad Unit" -> "Responsive" banayein)
// Tip: Aap chahein toh teeno ke liye SAME ID use kar sakte hain agar units Responsive hain.
// Lekin tracking ke liye alag rakhna behtar hai.
const SLOT_IDS = {
    horizontal: "1234567890", // Top/Bottom/Content ke liye
    vertical:   "0987654321", // Sidebar ke liye
    square:     "1122334455", // Specific chote areas ke liye
};

const { type = 'horizontal' } = Astro.props;

const currentSlotId = SLOT_IDS[type] || SLOT_IDS.horizontal;

// --- ðŸ§  INTELLIGENT LAYOUT LOGIC ---

let containerClass = "my-6 mx-auto flex justify-center items-center bg-gray-50 border border-gray-100 rounded-lg overflow-hidden";
let adFormat = "auto"; // MAGIC: Google decide karega shape
let adStyle = { display: 'block' };

if (type === 'horizontal') {
    // Logic: Width full lo, Height Google decide karega (Mobile pe square, Desktop pe banner ho sakta hai)
    // min-h-[100px] isliye diya taaki ad load hone se pehle layout shift (CLS) na ho.
    containerClass += " w-full min-h-[100px]"; 
    adFormat = "auto"; 
} 
else if (type === 'vertical') {
    // Logic: Sidebar mein width fix hoti hai, height flexible rakho.
    // Google yahan lamba skyscraper ya square box dono dikha sakta hai.
    containerClass += " w-full max-w-[300px] min-h-[250px]"; 
    adFormat = "auto"; 
} 
else if (type === 'square') {
    // Logic: Ye specific box hai, isme hum rectangular shape prefer karenge.
    containerClass += " w-full max-w-[336px] min-h-[280px]";
    adFormat = "rectangle";
}
---

<div class={containerClass}>
    
    {/* DEV MODE: Placeholder */}
    {import.meta.env.DEV ? (
        <div class="flex flex-col items-center justify-center text-gray-400 p-4 text-center w-full h-full bg-gray-100 border-2 border-dashed border-gray-300">
            <span class="text-xs font-bold uppercase tracking-widest text-gray-500">Ad ({type})</span>
            <span class="text-[10px] font-mono mt-1 text-blue-500">Auto Format</span>
        </div>
    ) : (
        /* PROD MODE: Fully Fluid Ad */
        <ins class="adsbygoogle"
             style={adStyle}
             data-ad-client={ADSENSE_ID}
             data-ad-slot={currentSlotId}
             data-ad-format={adFormat} 
             data-full-width-responsive="true"
        ></ins>
    )}

    {!import.meta.env.DEV && (
        <script is:inline>
             (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    )}
</div>
