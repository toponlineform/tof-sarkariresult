---
// src/components/AdSlot.astro

// üü¢ 1. MASTER ADSENSE ID (Central Control)
// Ye ID Layout.astro bhi import karega. Future me change karni ho to sirf yahan karein.
export const ADSENSE_ID = "ca-pub-XXXXXXXXXXXXXXXX"; 

// üü¢ 2. AD UNIT IDs (From Google AdSense Dashboard)
// Jab aap units create karenge, wahan se IDs lekar yahan replace kar dena.
const SLOT_IDS = {
    horizontal: "1234567890", // Header/Footer/Content ke beech
    vertical:   "0987654321", // Sidebar ke liye
    square:     "1122334455", // Small content areas ke liye
};

const { type = 'horizontal' } = Astro.props;

// Select correct slot based on type provided
const currentSlotId = SLOT_IDS[type] || SLOT_IDS.horizontal;

// üü¢ 3. LAYOUT SAFETY (To prevent design breakage)
let containerClass = "my-6 flex justify-center items-center overflow-hidden bg-gray-50 border border-gray-100 rounded-lg mx-auto";
let adStyle = { display: 'block' };

// Specific styles per type
if (type === 'horizontal') {
    // Responsive width, fixed height range
    containerClass += " w-full min-h-[90px] max-h-[280px]";
} 
else if (type === 'vertical') {
    // Fixed width for Sidebar
    containerClass = "my-6 flex justify-center items-center overflow-hidden bg-gray-50 border border-gray-100 rounded-lg w-[300px] h-[600px]";
    adStyle = { display: 'inline-block', width: '300px', height: '600px' };
} 
else if (type === 'square') {
    // Fixed box
    containerClass += " w-[300px] h-[250px]";
    adStyle = { display: 'inline-block', width: '300px', height: '250px' };
}
---

<div class={containerClass}>
    
    {/* üõ°Ô∏è DEVELOPMENT MODE: Show Placeholder Box */}
    {import.meta.env.DEV ? (
        <div class="flex flex-col items-center justify-center text-gray-400 p-4 w-full h-full text-center">
            <span class="text-xs font-bold uppercase tracking-widest text-gray-500 mb-1">Google Ad</span>
            <span class="text-[10px] font-mono bg-gray-200 px-2 py-1 rounded text-gray-600 mb-1">Type: {type}</span>
            <span class="text-[9px] font-mono text-gray-400">ID: {currentSlotId}</span>
        </div>
    ) : (
        /* üí∞ PRODUCTION MODE: Load Real Ad */
        <ins class="adsbygoogle"
             style={adStyle}
             data-ad-client={ADSENSE_ID}
             data-ad-slot={currentSlotId}
             data-ad-format={type === 'horizontal' ? 'auto' : null} 
             data-full-width-responsive={type === 'horizontal' ? 'true' : 'false'}
        ></ins>
    )}

    {/* Push Script: Only runs in Production/Build */}
    {!import.meta.env.DEV && (
        <script is:inline>
             (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    )}
</div>
