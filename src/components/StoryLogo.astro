---
// src/components/StoryLogo.astro
---
<div class="story-logo-wrapper">
  <div class="story-logo">
    <div class="block b-left"></div>
    <div class="block b-center"></div>
    <div class="block b-right"></div>

    <div class="stem-scanner"></div>

    <svg class="doc-svg">
      <rect class="doc-border" x="5" y="5" width="110" height="130" />
    </svg>
  </div>
  <p class="animate-pulse mt-6 text-xs text-yellow-400 font-mono tracking-widest uppercase">Live Processing...</p>
</div>

<style>
  /* Wrapper to center everything */
  .story-logo-wrapper {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }

  /* --- MAIN CONTAINER --- */
  .story-logo {
    position: relative;
    width: 120px;
    height: 140px;
  }

  /* BLOCKS */
  .block {
    position: absolute;
    top: 20px;
    width: 30px;
    height: 30px;
    background-color: white;
    border-radius: 6px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.3);
    z-index: 2;
  }
  .b-left   { left: 10px; animation: blockMoveLeft 6s ease-in-out infinite; }
  .b-center { left: 45px; animation: blockFade 6s ease-in-out infinite; }
  .b-right  { right: 10px; animation: blockMoveRight 6s ease-in-out infinite; }

  /* STEM / SCANNER */
  .stem-scanner {
    position: absolute;
    top: 55px; left: 45px; width: 30px; height: 65px;
    background-color: white; border-radius: 6px; z-index: 3;
    animation: morphToScanner 6s ease-in-out infinite;
  }

  /* BORDER */
  .doc-svg {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; overflow: visible;
  }
  .doc-border {
    fill: none; stroke: white; stroke-width: 3; rx: 10;
    stroke-dasharray: 500; stroke-dashoffset: 500; opacity: 0.5;
    animation: drawBorder 6s ease-in-out infinite;
  }

  /* KEYFRAMES */
  @keyframes blockMoveLeft {
    0%, 20% { transform: translate(0, 0); opacity: 1; }
    30%, 90% { transform: translate(-10px, -10px) scale(0.5); opacity: 0; }
    100% { transform: translate(0, 0); opacity: 1; }
  }
  @keyframes blockMoveRight {
    0%, 20% { transform: translate(0, 0); opacity: 1; }
    30%, 90% { transform: translate(10px, -10px) scale(0.5); opacity: 0; }
    100% { transform: translate(0, 0); opacity: 1; }
  }
  @keyframes blockFade {
    0%, 20% { opacity: 1; transform: scale(1); }
    30%, 90% { opacity: 0; transform: scale(0); }
    100% { opacity: 1; transform: scale(1); }
  }
  @keyframes drawBorder {
    0%, 20% { stroke-dashoffset: 500; opacity: 0; }
    35% { stroke-dashoffset: 0; opacity: 1; }
    85% { stroke-dashoffset: 0; opacity: 1; }
    95% { opacity: 0; }
    100% { stroke-dashoffset: 500; }
  }
  @keyframes morphToScanner {
    0%, 20% { top: 55px; height: 65px; width: 30px; left: 45px; background-color: white; border-radius: 6px; box-shadow: none; }
    30% { top: 20px; height: 6px; width: 80px; left: 20px; background-color: #facc15; border-radius: 4px; box-shadow: 0 0 15px #facc15; }
    50% { top: 110px; height: 6px; width: 80px; left: 20px; background-color: #facc15; box-shadow: 0 0 15px #facc15; }
    70% { top: 20px; height: 6px; width: 80px; left: 20px; background-color: #facc15; box-shadow: 0 0 15px #facc15; }
    85% { opacity: 0; }
    90% { opacity: 0; top: 55px; height: 65px; width: 30px; left: 45px; background-color: white; }
    100% { opacity: 1; }
  }
</style>
