---
import ToolLayout from '../../layouts/ToolLayout.astro';
import AdSlot from '../../components/AdSlot.astro';

const title = "Age Calculator Online - Check Exact Age for Govt Exams (SSC/UPSC)";
const description = "Calculate your exact age in Years, Months, and Days. Best for checking eligibility for SSC, UPSC, Banking, and Railway exams. 100% Accurate.";
---

<ToolLayout 
  title={title} 
  description={description}
  toolName="Age Calculator"
>
  
  {/* 1. AD SLOT (Top of Tool) */}
  <div class="mb-6">
    <AdSlot type="horizontal" />
  </div>

  {/* 2. MAIN CALCULATOR FORM */}
  {/* Note: Humne outer wrapper hata diya kyuki Layout already white box deta hai */}
  
  <div class="space-y-8">
      {/* INPUTS GRID */}
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          
          {/* Date of Birth */}
          <div class="bg-gray-50 p-4 rounded-xl border border-gray-200 hover:border-blue-300 transition-colors">
              <label class="block text-sm font-bold text-gray-700 mb-2">üìÖ Date of Birth</label>
              <input type="date" id="dobInput" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-lg font-mono bg-white">
          </div>

          {/* Age As On */}
          <div class="bg-gray-50 p-4 rounded-xl border border-gray-200 hover:border-blue-300 transition-colors">
              <label class="block text-sm font-bold text-gray-700 mb-2">üìç Age as on (Date)</label>
              <input type="date" id="todayInput" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-lg font-mono bg-white">
              <p class="text-xs text-gray-500 mt-2">*Default is Today's Date</p>
          </div>
      </div>

      {/* CALCULATE BUTTON */}
      <button id="calcBtn" class="w-full bg-gradient-to-r from-blue-600 to-blue-800 hover:from-blue-700 hover:to-blue-900 text-white font-bold py-4 px-6 rounded-xl shadow-lg transform hover:-translate-y-1 transition text-xl flex justify-center items-center gap-2">
          Calculate Age üöÄ
      </button>

      {/* RESULT AREA (Hidden Initially) */}
      <div id="resultArea" class="hidden animate-fade-in space-y-6">
          
          {/* Main Age Card */}
          <div class="bg-gradient-to-br from-gray-900 to-gray-800 text-white rounded-2xl p-6 md:p-8 text-center shadow-2xl relative overflow-hidden">
              <div class="relative z-10">
                  <p class="text-gray-400 uppercase tracking-widest text-sm font-bold mb-2">Your Exact Age</p>
                  <div class="flex justify-center items-baseline gap-2 md:gap-4 flex-wrap">
                      <div class="text-center">
                          <span id="resYears" class="text-4xl md:text-6xl font-extrabold text-yellow-400">0</span>
                          <span class="block text-xs md:text-sm text-gray-400 uppercase">Years</span>
                      </div>
                      <div class="text-4xl md:text-6xl text-gray-600 font-light">/</div>
                      <div class="text-center">
                          <span id="resMonths" class="text-4xl md:text-6xl font-extrabold text-yellow-400">0</span>
                          <span class="block text-xs md:text-sm text-gray-400 uppercase">Months</span>
                      </div>
                      <div class="text-4xl md:text-6xl text-gray-600 font-light">/</div>
                      <div class="text-center">
                          <span id="resDays" class="text-4xl md:text-6xl font-extrabold text-yellow-400">0</span>
                          <span class="block text-xs md:text-sm text-gray-400 uppercase">Days</span>
                      </div>
                  </div>
              </div>
              {/* Background Decoration */}
              <div class="absolute top-0 right-0 -mt-10 -mr-10 w-32 h-32 bg-blue-500 rounded-full blur-3xl opacity-20"></div>
          </div>

          {/* Extra Stats Grid */}
          <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
              <div class="bg-blue-50 p-4 rounded-xl border border-blue-100 text-center">
                  <div class="text-2xl">üéÇ</div>
                  <p class="text-xs text-gray-500 font-bold uppercase mt-1">Next Birthday</p>
                  <p id="nextBdayDay" class="text-blue-700 font-bold">Monday</p>
                  <p id="nextBdayMonth" class="text-xs text-gray-400">in 5 months</p>
              </div>
              <div class="bg-green-50 p-4 rounded-xl border border-green-100 text-center">
                  <div class="text-2xl">üóìÔ∏è</div>
                  <p class="text-xs text-gray-500 font-bold uppercase mt-1">Total Months</p>
                  <p id="totalMonths" class="text-green-700 font-bold">300</p>
              </div>
              <div class="bg-purple-50 p-4 rounded-xl border border-purple-100 text-center">
                  <div class="text-2xl">üå§Ô∏è</div>
                  <p class="text-xs text-gray-500 font-bold uppercase mt-1">Total Days</p>
                  <p id="totalDays" class="text-purple-700 font-bold">9,125</p>
              </div>
              <div class="bg-pink-50 p-4 rounded-xl border border-pink-100 text-center">
                  <div class="text-2xl">‚è∞</div>
                  <p class="text-xs text-gray-500 font-bold uppercase mt-1">Total Hours</p>
                  <p id="totalHours" class="text-pink-700 font-bold">219,000</p>
              </div>
          </div>
      </div>
  </div>

  {/* 3. SEO CONTENT (Neeche wala text) */}
  <div slot="content">
      <p>
          For government exams like <strong>SSC CGL, CHSL, UPSC, and IBPS PO</strong>, there is a specific age limit (e.g., 18 to 27 years). The official notification often says: 
          <em>"Candidate's age as on 01 August 2025"</em>.
      </p>
      <p>
          Calculating this manually can be tricky because of leap years and varying days in months. Our <strong>Infinity Age Calculator</strong> does the math for you in a split second with 100% accuracy.
      </p>
      <h3>Features:</h3>
      <ul>
        <li>100% Accurate Govt Job Age Check</li>
        <li>Shows Next Birthday & Day</li>
        <li>Total Days & Hours Calculation</li>
      </ul>
  </div>

</ToolLayout>

{/* üß† JAVASCRIPT LOGIC (Same as before) */}
<script>
  const dobInput = document.getElementById('dobInput') as HTMLInputElement;
  const todayInput = document.getElementById('todayInput') as HTMLInputElement;
  const calcBtn = document.getElementById('calcBtn');
  const resultArea = document.getElementById('resultArea');
  
  // Set Today's Date as Default
  const today = new Date();
  todayInput.valueAsDate = today;

  calcBtn?.addEventListener('click', () => {
      const dobVal = dobInput.value;
      const targetVal = todayInput.value;

      if (!dobVal) {
          alert("Please select your Date of Birth");
          return;
      }

      const dob = new Date(dobVal);
      const target = new Date(targetVal);

      if (dob > target) {
          alert("Date of Birth cannot be in the future!");
          return;
      }

      // Calculation Logic
      let years = target.getFullYear() - dob.getFullYear();
      let months = target.getMonth() - dob.getMonth();
      let days = target.getDate() - dob.getDate();

      if (days < 0) {
          months--;
          const prevMonthDate = new Date(target.getFullYear(), target.getMonth(), 0);
          days += prevMonthDate.getDate();
      }

      if (months < 0) {
          years--;
          months += 12;
      }

      // Update Main Result
      document.getElementById('resYears').innerText = years.toString();
      document.getElementById('resMonths').innerText = months.toString();
      document.getElementById('resDays').innerText = days.toString();

      // Extra Stats
      const diffTime = Math.abs(target.getTime() - dob.getTime());
      const totalDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
      const totalHours = totalDays * 24;
      
      document.getElementById('totalMonths').innerText = ((years * 12) + months).toString();
      document.getElementById('totalDays').innerText = totalDays.toLocaleString();
      document.getElementById('totalHours').innerText = totalHours.toLocaleString();

      // Next Birthday Logic
      const currentYear = target.getFullYear();
      let nextBday = new Date(dob);
      nextBday.setFullYear(currentYear);
      
      if (nextBday < target) {
          nextBday.setFullYear(currentYear + 1);
      }
      
      const daysToBday = Math.ceil((nextBday.getTime() - target.getTime()) / (1000 * 60 * 60 * 24));
      const daysOfWeek = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
      
      document.getElementById('nextBdayDay').innerText = daysOfWeek[nextBday.getDay()];
      document.getElementById('nextBdayMonth').innerText = daysToBday === 0 ? "Today! üéÇ" : `in ${daysToBday} days`;

      // Show Result
      resultArea.classList.remove('hidden');
  });
</script>
