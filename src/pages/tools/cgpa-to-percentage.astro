---
// src/pages/tools/cgpa-to-percentage.astro
import ToolLayout from '../../layouts/ToolLayout.astro';
import AdSlot from '../../components/AdSlot.astro';

const title = "CGPA to Percentage Calculator - Convert Grades for CBSE & University";
const description = "Instantly convert CGPA to Percentage for CBSE, Mumbai University, KTU, VTU & Anna University. Best tool for filling SSC, UPSC & Placement forms.";
---

<ToolLayout 
  title={title} 
  description={description}
  toolName="CGPA Calculator"
>

  {/* ‚ö° FAQ SCHEMA */}
  <script type="application/ld+json" slot="head">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [{
        "@type": "Question",
        "name": "How to convert CGPA to Percentage for CBSE?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "For CBSE, the standard formula is Percentage = CGPA √ó 9.5. For example, if your CGPA is 8.0, your percentage is 76%."
        }
      }, {
        "@type": "Question",
        "name": "What is the CGPA formula for Mumbai University?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "For Mumbai University (Rev 2016 onwards), the formula is Percentage = (7.1 √ó CGPA) + 11. If CGPA is less than 7, the formula differs slightly."
        }
      }]
    }
  </script>

  {/* 1. TOP AD SLOT */}
  <div class="mb-8">
    <AdSlot type="horizontal" />
  </div>

  {/* MAIN CALCULATOR CARD */}
  <div class="bg-white border border-gray-200 rounded-2xl shadow-xl overflow-hidden ring-1 ring-gray-100 mb-8">
      
      {/* TABS */}
      <div class="flex border-b border-gray-200 bg-gray-50">
          <button id="tabToPercent" class="flex-1 py-4 text-sm font-bold text-purple-700 bg-white border-b-2 border-purple-600 focus:outline-none transition-colors">
              CGPA to Percentage
          </button>
          <button id="tabToCgpa" class="flex-1 py-4 text-sm font-bold text-gray-500 hover:text-purple-600 focus:outline-none transition-colors">
              Percentage to CGPA
          </button>
      </div>

      <div class="p-6 md:p-8 flex flex-col md:flex-row gap-8 items-center">
          
          {/* LEFT: INPUTS */}
          <div class="w-full md:w-1/2 space-y-6">
              
              {/* Formula Selector */}
              <div class="transition-opacity duration-200">
                  <label class="block text-xs font-bold text-gray-500 uppercase tracking-wide mb-2">Select Board / University</label>
                  <select id="formulaSelect" class="w-full p-3 border border-gray-300 rounded-lg bg-gray-50 font-medium focus:ring-2 focus:ring-purple-500 outline-none cursor-pointer">
                      <option value="9.5">CBSE / Standard (x 9.5)</option>
                      <option value="10">Simple Scale (x 10)</option>
                      <option value="eng">Engineering (VTU/Anna) [-0.75 x 10]</option>
                      <option value="mumbai">Mumbai University [7.1x + 11]</option>
                      <option value="ktu">KTU Kerala [-0.5 x 10]</option>
                  </select>
              </div>

              {/* Input Field */}
              <div>
                  <label class="block text-sm font-bold text-gray-700 mb-2" id="inputLabel">Enter CGPA (e.g. 9.2)</label>
                  <div class="relative">
                    <input type="number" id="inputVal" placeholder="0.00" step="0.01" min="0" max="100" class="w-full p-4 text-2xl font-mono border border-gray-300 rounded-xl focus:ring-4 focus:ring-purple-100 outline-none text-purple-700 font-bold bg-white shadow-inner">
                  </div>
              </div>

              <button id="calcBtn" class="w-full bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white font-bold py-4 px-6 rounded-xl shadow-lg transition transform hover:-translate-y-1 text-lg flex justify-center items-center gap-2">
                  Convert Now ‚ö°
              </button>

          </div>

          {/* RIGHT: RESULT DISPLAY */}
          <div class="w-full md:w-1/2 flex justify-center">
              <div class="relative w-64 h-64 flex flex-col items-center justify-center bg-gray-50 rounded-full border-8 border-gray-100 shadow-inner group">
                  
                  {/* Decorative Ring */}
                  <div class="absolute inset-0 rounded-full border-4 border-dashed border-purple-200 opacity-50 animate-spin-slow"></div>

                  <div class="text-center z-10 relative">
                      <span class="block text-gray-400 text-xs font-bold uppercase tracking-widest mb-1" id="resultLabel">Percentage</span>
                      <h2 id="resultVal" class="text-5xl md:text-6xl font-extrabold text-gray-800 transition-all transform group-hover:scale-110">0%</h2>
                      <p id="gradeVal" class="text-green-600 font-bold mt-2 text-sm bg-green-50 px-3 py-1 rounded-full">-</p>
                  </div>
              </div>
          </div>

      </div>

      {/* Quick Table for SEO */}
      <div class="bg-purple-50 p-4 border-t border-purple-100">
          <h4 class="text-xs font-bold text-purple-900 mb-3 uppercase tracking-wide text-center">Quick Reference (CBSE 9.5 Scale)</h4>
          <div class="grid grid-cols-2 md:grid-cols-4 gap-3 text-sm text-center">
              <div class="bg-white p-2 rounded shadow-sm border border-purple-100"><span class="font-bold text-gray-600">10 CGPA</span> = 95%</div>
              <div class="bg-white p-2 rounded shadow-sm border border-purple-100"><span class="font-bold text-gray-600">9 CGPA</span> = 85.5%</div>
              <div class="bg-white p-2 rounded shadow-sm border border-purple-100"><span class="font-bold text-gray-600">8 CGPA</span> = 76%</div>
              <div class="bg-white p-2 rounded shadow-sm border border-purple-100"><span class="font-bold text-gray-600">7 CGPA</span> = 66.5%</div>
          </div>
      </div>

  </div>

  {/* 2. MIDDLE AD SLOT (High Visibility after Calculation) */}
  <div class="mb-8">
     <AdSlot type="horizontal" />
  </div>

  {/* SEO CONTENT AREA */}
  <div slot="content">
      <p class="lead text-lg text-gray-700 mb-4">
          Most government job applications (like <strong class="text-purple-700">SSC CGL, CHSL, UPSC, Railways</strong>) and college admissions require you to enter your marks in <strong>Percentage (%)</strong> format. If your marksheet shows grades in CGPA or SGPA, you must convert them accurately.
      </p>

      <h3 class="text-xl font-bold text-gray-800 mb-2">Why is this converter important?</h3>
      <ul class="list-disc pl-5 space-y-2 mb-6">
          <li><strong>Accuracy:</strong> Manual calculation often leads to errors like 9.5 vs 10 multiplication.</li>
          <li><strong>University Support:</strong> Different universities (Mumbai, VTU, KTU) use different formulas. We support them all.</li>
          <li><strong>Govt Job Ready:</strong> Avoid rejection in document verification by entering the exact decimal percentage.</li>
      </ul>

      <h3 class="text-xl font-bold text-gray-800 mb-2">Popular Conversion Formulas</h3>
      <div class="overflow-x-auto shadow-sm rounded-lg border border-gray-200">
        <table class="min-w-full text-sm text-left">
          <thead class="bg-gray-100 text-gray-700 font-bold uppercase text-xs">
            <tr>
              <th class="p-3">Board / University</th>
              <th class="p-3">Formula</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-gray-200 bg-white">
            <tr><td class="p-3 font-medium">CBSE / SSC</td><td class="p-3 text-purple-600 font-mono">CGPA √ó 9.5</td></tr>
            <tr><td class="p-3 font-medium">Mumbai Univ (Rev 2016)</td><td class="p-3 text-purple-600 font-mono">(7.1 √ó CGPA) + 11</td></tr>
            <tr><td class="p-3 font-medium">VTU / Anna Univ</td><td class="p-3 text-purple-600 font-mono">(CGPA - 0.75) √ó 10</td></tr>
            <tr><td class="p-3 font-medium">KTU (Kerala)</td><td class="p-3 text-purple-600 font-mono">(CGPA - 0.5) √ó 10</td></tr>
          </tbody>
        </table>
      </div>
  </div>

</ToolLayout>

{/* üß† JAVASCRIPT LOGIC */}
<script>
  const tabToPercent = document.getElementById('tabToPercent');
  const tabToCgpa = document.getElementById('tabToCgpa');
  const formulaSelect = document.getElementById('formulaSelect');
  const inputLabel = document.getElementById('inputLabel');
  const inputVal = document.getElementById('inputVal');
  const calcBtn = document.getElementById('calcBtn');
  const resultVal = document.getElementById('resultVal');
  const resultLabel = document.getElementById('resultLabel');
  const gradeVal = document.getElementById('gradeVal');

  let mode = 'toPercent'; // 'toPercent' or 'toCgpa'

  // 1. Tab Switching Logic
  function setMode(newMode) {
      mode = newMode;
      inputVal.value = '';
      resultVal.innerText = mode === 'toPercent' ? '0%' : '0';
      gradeVal.innerText = '-';

      if (mode === 'toPercent') {
          // UI Style
          tabToPercent.className = "flex-1 py-4 text-sm font-bold text-purple-700 bg-white border-b-2 border-purple-600 focus:outline-none transition-colors cursor-pointer";
          tabToCgpa.className = "flex-1 py-4 text-sm font-bold text-gray-500 hover:text-purple-600 focus:outline-none transition-colors cursor-pointer";
          
          inputLabel.innerText = "Enter CGPA (e.g. 9.4)";
          resultLabel.innerText = "Percentage";
          formulaSelect.disabled = false;
          formulaSelect.parentElement.classList.remove('opacity-50', 'pointer-events-none');
          inputVal.placeholder = "0.00";
      } else {
          // UI Style
          tabToCgpa.className = "flex-1 py-4 text-sm font-bold text-purple-700 bg-white border-b-2 border-purple-600 focus:outline-none transition-colors cursor-pointer";
          tabToPercent.className = "flex-1 py-4 text-sm font-bold text-gray-500 hover:text-purple-600 focus:outline-none transition-colors cursor-pointer";
          
          inputLabel.innerText = "Enter Percentage (e.g. 85%)";
          resultLabel.innerText = "CGPA";
          formulaSelect.disabled = true; 
          formulaSelect.parentElement.classList.add('opacity-50', 'pointer-events-none');
          inputVal.placeholder = "00.00";
      }
  }

  tabToPercent.addEventListener('click', () => setMode('toPercent'));
  tabToCgpa.addEventListener('click', () => setMode('toCgpa'));

  // 2. Calculation Logic
  function calculate() {
      let val = parseFloat(inputVal.value);
      if (isNaN(val)) {
        resultVal.innerText = mode === 'toPercent' ? '0%' : '0';
        return;
      }

      let res = 0;
      let grade = "";

      if (mode === 'toPercent') {
          // CGPA -> %
          const formula = formulaSelect.value;
          
          if (formula === '9.5') res = val * 9.5;
          else if (formula === '10') res = val * 10;
          else if (formula === 'eng') res = (val - 0.75) * 10;
          else if (formula === 'mumbai') {
                if(val >= 7) res = (7.1 * val) + 11;
                else res = (7.25 * val) + 11; 
          }
          else if (formula === 'ktu') res = (val - 0.5) * 10; 

          if (res > 100) res = 100; // Cap at 100
          resultVal.innerText = res.toFixed(2) + '%';
          
      } else {
          // % -> CGPA (Standard Reverse 9.5)
          res = val / 9.5;
          if (res > 10) res = 10;
          resultVal.innerText = res.toFixed(2);
      }

      // Grading Text
      if(mode === 'toPercent') {
          if(res >= 90) grade = "Outstanding! üåü";
          else if(res >= 80) grade = "Excellent Work! üëè";
          else if(res >= 60) grade = "First Class üëç";
          else grade = "Keep it up!";
      } else {
         grade = "Calculated CGPA";
      }
      gradeVal.innerText = grade;
  }

  calcBtn.addEventListener('click', calculate);
  
  // Auto Calc on Input
  inputVal.addEventListener('input', calculate);
  formulaSelect.addEventListener('change', calculate);

</script>
